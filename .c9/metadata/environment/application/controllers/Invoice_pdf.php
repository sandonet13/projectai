{"filter":false,"title":"Invoice_pdf.php","tooltip":"/application/controllers/Invoice_pdf.php","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":51,"column":51},"action":"insert","lines":["<?php","","if (!defined('BASEPATH'))","    exit('No direct script access allowed');","","class About extends CI_Controller {","","    function __construct() {","        parent::__construct();","        $this->load->model(\"Pages_model\");","    }","","    function index($slug = \"\") {","        if (!$slug) {","            show_404();","        }","","        $options = array(\"slug\" => $slug);","        $page_info = $this->Pages_model->get_details($options)->row();","","        if ($page_info->internal_use_only) {","            //the page should be visible on logged in user only","            $login_user_id = $this->Users_model->login_user_id();","            if (!$login_user_id) {","                show_404();","            }","","            $user_info = $this->Users_model->get_one($login_user_id);","","            if (!$user_info->is_admin && ($page_info->visible_to_team_members_only || $page_info->visible_to_clients_only)) {","                if ($page_info->visible_to_team_members_only && $user_info->user_type !== \"staff\") {","                    //the page should be visible to team members only","                    show_404();","                } else if ($page_info->visible_to_clients_only && $user_info->user_type !== \"client\") {","                    //the page should be visible to clients only","                    show_404();","                }","            }","        }","","        $view_data[\"model_info\"] = $page_info;","","        $view_data['topbar'] = \"includes/public/topbar\";","        $view_data['left_menu'] = false;","","        $this->template->rander(\"about/index\", $view_data);","    }","","}","","/* End of file About.php */","/* Location: ./application/controllers/About.php */"],"id":1}],[{"start":{"row":5,"column":6},"end":{"row":5,"column":11},"action":"remove","lines":["About"],"id":2},{"start":{"row":5,"column":6},"end":{"row":5,"column":7},"action":"insert","lines":["I"]},{"start":{"row":5,"column":7},"end":{"row":5,"column":8},"action":"insert","lines":["n"]},{"start":{"row":5,"column":8},"end":{"row":5,"column":9},"action":"insert","lines":["v"]},{"start":{"row":5,"column":9},"end":{"row":5,"column":10},"action":"insert","lines":["o"]},{"start":{"row":5,"column":10},"end":{"row":5,"column":11},"action":"insert","lines":["i"]},{"start":{"row":5,"column":11},"end":{"row":5,"column":12},"action":"insert","lines":["c"]},{"start":{"row":5,"column":12},"end":{"row":5,"column":13},"action":"insert","lines":["e"]}],[{"start":{"row":5,"column":13},"end":{"row":5,"column":14},"action":"insert","lines":["_"],"id":3},{"start":{"row":5,"column":14},"end":{"row":5,"column":15},"action":"insert","lines":["p"]},{"start":{"row":5,"column":15},"end":{"row":5,"column":16},"action":"insert","lines":["d"]},{"start":{"row":5,"column":16},"end":{"row":5,"column":17},"action":"insert","lines":["f"]}],[{"start":{"row":0,"column":0},"end":{"row":51,"column":51},"action":"remove","lines":["<?php","","if (!defined('BASEPATH'))","    exit('No direct script access allowed');","","class Invoice_pdf extends CI_Controller {","","    function __construct() {","        parent::__construct();","        $this->load->model(\"Pages_model\");","    }","","    function index($slug = \"\") {","        if (!$slug) {","            show_404();","        }","","        $options = array(\"slug\" => $slug);","        $page_info = $this->Pages_model->get_details($options)->row();","","        if ($page_info->internal_use_only) {","            //the page should be visible on logged in user only","            $login_user_id = $this->Users_model->login_user_id();","            if (!$login_user_id) {","                show_404();","            }","","            $user_info = $this->Users_model->get_one($login_user_id);","","            if (!$user_info->is_admin && ($page_info->visible_to_team_members_only || $page_info->visible_to_clients_only)) {","                if ($page_info->visible_to_team_members_only && $user_info->user_type !== \"staff\") {","                    //the page should be visible to team members only","                    show_404();","                } else if ($page_info->visible_to_clients_only && $user_info->user_type !== \"client\") {","                    //the page should be visible to clients only","                    show_404();","                }","            }","        }","","        $view_data[\"model_info\"] = $page_info;","","        $view_data['topbar'] = \"includes/public/topbar\";","        $view_data['left_menu'] = false;","","        $this->template->rander(\"about/index\", $view_data);","    }","","}","","/* End of file About.php */","/* Location: ./application/controllers/About.php */"],"id":4},{"start":{"row":0,"column":0},"end":{"row":353,"column":0},"action":"insert","lines":["<?php","","if (!defined('BASEPATH'))","    exit('No direct script access allowed');","","class Material extends MY_Controller","{","    function __construct()","    {","        parent::__construct();","        $this->access_only_team_members();","    }","","    function index()","    {","        $this->check_module_availability(\"module_note\");","","        $this->template->rander(\"material/index\");","    }","","    private function _make_row($data)","    {","        $public_icon = \"\";","        // $title = modal_anchor(get_uri(\"notes/view/\" . $data->id), $public_icon . $data->title, array(\"title\" => lang('note'), \"data-post-id\" => $data->id));","","        // if ($data->labels_list) {","        //     $note_labels = make_labels_view_data($data->labels_list, true);","        //     $title .= \"<br />\" . $note_labels;","        // }","","        // $files_link = \"\";","        // if ($data->files) {","        //     $files = unserialize($data->files);","        //     if (count($files)) {","        //         foreach ($files as $key => $value) {","        //             $file_name = get_array_value($value, \"file_name\");","        //             $link = \" fa fa-\" . get_file_icon(strtolower(pathinfo($file_name, PATHINFO_EXTENSION)));","        //             $files_link .= js_anchor(\" \", array('title' => \"\", \"data-toggle\" => \"app-modal\", \"data-sidebar\" => \"0\", \"class\" => \"pull-left font-22 mr10 $link\", \"title\" => remove_file_prefix($file_name), \"data-url\" => get_uri(\"notes/file_preview/\" . $data->id . \"/\" . $key)));","        //         }","        //     }","        // }","","        $spesification = $data->specification;","        $qty = $data->qty;","\t\t$unit_price = $data->unit_price;","\t\t$num_format = number_format($unit_price,0, ',', '.');","\t\t$tot = $qty * $unit_price;","\t\t$num_format_tot = number_format($tot,0, ',', '.');","\t\t","\t\t$format_date = $data->mr_date_register;","\t\t$newDate = date(\"Y-m-d\", strtotime($format_date));","\t","        $actions = modal_anchor(get_uri(\"material/view/\" . $data->id_asset_req), \"<i class='fa fa-bolt'></i>\", array(\"class\" => \"edit\", \"title\" => lang('note_details'), \"data-modal-title\" => lang(\"note\"), \"data-post-id\" => $data->id_asset_req));","","","","        if ($this->login_user->is_admin || $this->login_user->user_type == \"staff\") {","            $actions = modal_anchor(get_uri(\"/material/edit_form/\" . $data->id_asset_req), \"<i class='fa fa-pencil'></i>\", array(\"class\" => \"edit\", \"title\" => lang('edit_note'), \"data-post-id\" => $data->id_asset_req))","                . js_anchor(\"<i class='fa fa-times fa-fw'></i>\", array('title' => lang('delete_note'), \"class\" => \"delete\", \"data-id\" => $data->id_asset_req, \"data-action-url\" => get_uri(\"material/delete/\" . $data->id_asset_req), \"data-action\" => \"delete-confirmation\"));","        }","","        $invoice = $data->invoice;","        $po = $data->po;","        $do = $data->do;","        $sp3 = $data->sp3;","\t\t","\t\tif(strpos($do, 'content/uploads') == true){","\t\t\t$do = '<a href=\"' . $data->do . '\">' . $data->do . '</a>';","\t\t}else{","\t\t\t$do = '<a href=\"' . base_url('files/system/' . $data->do) . '\">' . $data->do . '</a>';","\t\t}","\t\t","\t\tif(strpos($sp3, 'content/uploads') == true){","\t\t\t$sp3 = '<a href=\"' . $data->sp3 . '\">' . $data->sp3 . '</a>';","\t\t}else{","\t\t\t$sp3 = '<a href=\"' . base_url('files/system/' . $data->sp3) . '\">' . $data->sp3 . '</a>';","\t\t}","\t\t","\t\tif(strpos($po, 'content/uploads') == true){","\t\t\t$po = '<a href=\"' . $data->po . '\">' . $data->po . '</a>';","\t\t}else{","\t\t\t$po = '<a href=\"' . base_url('files/system/' . $data->po) . '\">' . $data->po . '</a>';","\t\t}","\t\t","\t\tif(strpos($invoice, 'content/uploads') == true){","\t\t\t$invoice = '<a href=\"' . $data->invoice . '\">' . $data->invoice . '</a>';","\t\t}else{","\t\t\t$invoice = '<a href=\"' . base_url('files/system/' . $data->invoice) . '\">' . $data->invoice . '</a>';","\t\t}","\t\t","\t\t$status = $data->status;","\t\tif($status == \"Completed\"){","\t\t\t$status = '<span class=\"label label-success large\">' . $data->status . '</span>';","\t\t}","\t\t","\t\t$priority = $data->priority;","\t\tif($priority == \"High\"){","\t\t\t$priority = '<span class=\"label label-danger large\">' . $data->priority . '</span>';","\t\t}","\t\tif($priority == \"Medium\"){","\t\t\t$priority = '<span class=\"label label-warning large\">' . $data->priority . '</span>';","\t\t}","\t\tif($priority == \"Low\"){","\t\t\t$priority = '<span class=\"label label-info large\">' . $data->priority . '</span>';","\t\t}","\t\t","\t\t$measurement = $data->measurement;","\t\tif($measurement == 1){","\t\t\t$measurement = \"BKS\";","\t\t}","\t\tif($measurement == 2){","\t\t\t$measurement = \"Drum\";","\t\t}","\t\tif($measurement == 3){","\t\t\t$measurement = \"Kaleng\";","\t\t}","\t\tif($measurement == 4){","\t\t\t$measurement = \"Kg\";","\t\t}","\t\tif($measurement == 5){","\t\t\t$measurement = \"Lembar\";","\t\t}","\t\tif($measurement == 6){","\t\t\t$measurement = \"Lente\";","\t\t}","\t\tif($measurement == 7){","\t\t\t$measurement = \"LMB\";","\t\t}","\t\tif($measurement == 8){","\t\t\t$measurement = \"Lot\";","\t\t}","\t\tif($measurement == 9){","\t\t\t$measurement = \"Meter\";","\t\t}","\t\tif($measurement == 10){","\t\t\t$measurement = \"Pack\";","\t\t}","\t\tif($measurement == 11){","\t\t\t$measurement = \"Pcs\";","\t\t}","\t\tif($measurement == 12){","\t\t\t$measurement = \"Roll\";","\t\t}","\t\tif($measurement == 13){","\t\t\t$measurement = \"Set\";","\t\t}","\t\tif($measurement == 14){","\t\t\t$measurement = \"Unit\";","\t\t}","\t\tif($measurement == 15){","\t\t\t$measurement = \"Pasang\";","\t\t}","\t\tif($measurement == 16){","\t\t\t$measurement = \"Lusin\";","\t\t}","\t\tif($measurement == 17){","\t\t\t$measurement = \"Batang\";","\t\t}","\t\tif($measurement == 18){","\t\t\t$measurement = \"Cm\";","\t\t}","\t\tif($measurement == 19){","\t\t\t$measurement = \"Liter\";","\t\t}","\t\t","","\t\t\t","\t\t","        return array(","            $data->item_description,","            $spesification,","            $newDate,","            $data->no_mr_asset,","            $qty,","            $measurement,","            $data->notes,","            $status,","            $data->po_no,","            $do,","            $po,","            $invoice,","            $sp3,","            \"Rp\" . $num_format,","\t\t\t\"Rp\" . $num_format_tot,","            $priority,","            $actions","        );","","    }","","    function list_data()","    {","        $this->load->model('Material_model');","        $list_data = $this->Material_model->get_list()->result();","        $result = array();","        foreach ($list_data as $data) {","            $result[] = $this->_make_row($data);","        }","        echo json_encode(array(\"data\" => $result));","    }","","    function modal_form()","    {","        $view_data['model_info'] = $this->Notes_model->get_one($this->input->post('id'));","        $view_data['project_id'] = $this->input->post('project_id') ? $this->input->post('project_id') : $view_data['model_info']->project_id;","        $view_data['client_id'] = $this->input->post('client_id') ? $this->input->post('client_id') : $view_data['model_info']->client_id;","        $view_data['user_id'] = $this->input->post('user_id') ? $this->input->post('user_id') : $view_data['model_info']->user_id;","","        //check permission for saved note","        // if ($view_data['model_info']->id) {","        //     $this->validate_access_to_note($view_data['model_info'], true);","        // }","","        $view_data['label_suggestions'] = $this->make_labels_dropdown(\"note\", $view_data['model_info']->labels, false);","        $this->load->view('material/modal_form', $view_data);","    }","","    function save()","    {","","        $config['upload_path'] = './files/system/';","        $config['allowed_types'] = 'pdf';","        $config['max_size'] = 30000;","","        $this->load->library('upload', $config);","","        if ($this->upload->do_upload('invoice')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['invoice'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('do')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['do'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('po')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['po'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('sp3')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['sp3'] = $upload['nama_file'];","        }","","","        $this->load->model('Material_model');","        $this->db->insert('material_request', $this->input->post());","        return redirect('/material');","    }","","    function delete($id)","    {","        $this->db->where('id_asset_req', $id);","        $this->db->delete('material_request');","","        echo json_encode(array(\"success\" => true, 'message' => lang('record_deleted')));","    }","","","    function edit_form($id)","    {","        $data['model_info'] = $this->db->get_where('material_request', array('id_asset_req' => $id))->row();","","","        $this->load->view('material/edit_form', $data);","    }","","    function edit()","    {","        $config['upload_path'] = './files/system/';","        $config['allowed_types'] = 'pdf';","        $config['max_size'] = 30000;","","        $this->load->library('upload', $config);","","        if ($this->upload->do_upload('invoice')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['invoice'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('do')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['do'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('po')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['po'] = $upload['nama_file'];","        }","        if ($this->upload->do_upload('sp3')) {","            $fileData = $this->upload->data();","","            $upload = [","                'nama_file' => $fileData['file_name'],","                'tipe_file' => $fileData['file_type'],","                'ukuran_file' => $fileData['file_size'],","            ];","","            $_POST['sp3'] = $upload['nama_file'];","        }","","        $this->db->where('id_asset_req', $this->input->post('id_asset_req'));","        $this->db->update('material_request', $this->input->post());","","        return redirect('/material');","    }","}",""]}],[{"start":{"row":5,"column":6},"end":{"row":5,"column":14},"action":"remove","lines":["Material"],"id":5},{"start":{"row":5,"column":6},"end":{"row":5,"column":7},"action":"insert","lines":["I"]},{"start":{"row":5,"column":7},"end":{"row":5,"column":8},"action":"insert","lines":["n"]},{"start":{"row":5,"column":8},"end":{"row":5,"column":9},"action":"insert","lines":["v"]},{"start":{"row":5,"column":9},"end":{"row":5,"column":10},"action":"insert","lines":["o"]},{"start":{"row":5,"column":10},"end":{"row":5,"column":11},"action":"insert","lines":["i"]},{"start":{"row":5,"column":11},"end":{"row":5,"column":12},"action":"insert","lines":["c"]},{"start":{"row":5,"column":12},"end":{"row":5,"column":13},"action":"insert","lines":["e"]},{"start":{"row":5,"column":13},"end":{"row":5,"column":14},"action":"insert","lines":["_"]},{"start":{"row":5,"column":14},"end":{"row":5,"column":15},"action":"insert","lines":["p"]},{"start":{"row":5,"column":15},"end":{"row":5,"column":16},"action":"insert","lines":["d"]}],[{"start":{"row":5,"column":16},"end":{"row":5,"column":17},"action":"insert","lines":["f"],"id":6}]]},"ace":{"folds":[],"scrolltop":1080,"scrollleft":0,"selection":{"start":{"row":5,"column":17},"end":{"row":5,"column":17},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1021,"mode":"ace/mode/php"}},"timestamp":1616749383005,"hash":"651ae00d70eaeb24f229d621210a08a407877a59"}